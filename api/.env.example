# ==============================================================================
# Open Hallucination Index API - Environment Configuration
# ==============================================================================
# Copy this file to .env and adjust values as needed.
# ==============================================================================

# ------------------------------------------------------------------------------
# API Keys for External Services
# ------------------------------------------------------------------------------
HF_TOKEN=your-huggingface-token-here
OPENAI_API_KEY=your-openai-api-key-here
CONTEXT7_API_KEY=your-context7-api-key-here

# ------------------------------------------------------------------------------
# API Settings
# ------------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8080
API_WORKERS=1
API_DEBUG=false
API_TITLE=Open Hallucination Index
API_VERSION=0.1.0
API_RATE_LIMIT_PER_MINUTE=60

# API Key for authentication (generate a secure random string for production)
# Example: openssl rand -hex 32
API_API_KEY=your-secret-api-key-here

# CORS origins (comma-separated, use * for development only)
API_CORS_ORIGINS=*

# ------------------------------------------------------------------------------
# LLM Configuration
# ------------------------------------------------------------------------------
# Base URL for OpenAI-compatible API (vLLM, Ollama, OpenAI, etc.)
LLM_BASE_URL=http://your-llm-service:8000/v1

# Model name
LLM_MODEL=TheBloke/openinstruct-mistral-7B-AWQ

# API key
LLM_API_KEY=your-llm-api-key

# Request settings
LLM_TIMEOUT_SECONDS=60
LLM_MAX_RETRIES=3


# ------------------------------------------------------------------------------
# Neo4j Graph Database
# ------------------------------------------------------------------------------
NEO4J_URI=bolt://your-neo4j-host:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=your-neo4j-password

# ------------------------------------------------------------------------------
# Qdrant Vector Database
# ------------------------------------------------------------------------------
QDRANT_HOST=your-qdrant-host
QDRANT_PORT=6333
QDRANT_COLLECTION_NAME=facts
QDRANT_VECTOR_SIZE=384
QDRANT_GRPC_PORT=6334
QDRANT_USE_GRPC=false
QDRANT_API_KEY=

# ------------------------------------------------------------------------------
# Redis Cache (optional)
# ------------------------------------------------------------------------------
REDIS_ENABLED=true
REDIS_HOST=your-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_CACHE_TTL_SECONDS=3600
REDIS_CLAIM_CACHE_TTL_SECONDS=2592000
REDIS_MAX_CONNECTIONS=10
REDIS_SOCKET_PATH=

# ------------------------------------------------------------------------------
# Local Embeddings
# ------------------------------------------------------------------------------
EMBEDDING_MODEL_NAME=all-MiniLM-L12-v2
EMBEDDING_BATCH_SIZE=32
EMBEDDING_NORMALIZE=true

# ------------------------------------------------------------------------------
# MCP Knowledge Sources (optional)
# ------------------------------------------------------------------------------
# Wikipedia MCP (general knowledge)
MCP_WIKIPEDIA_ENABLED=true
MCP_WIKIPEDIA_URL=http://your-mcp-server:8080

# Context7 MCP (technical documentation)
MCP_CONTEXT7_ENABLED=true
MCP_CONTEXT7_URL=http://your-mcp-server:8080
# Use either MCP_CONTEXT7_API_KEY or CONTEXT7_API_KEY
MCP_CONTEXT7_API_KEY=
CONTEXT7_BASE_URL=https://context7.com

# Unified OHI MCP Server
MCP_OHI_ENABLED=true
MCP_OHI_URL=http://your-mcp-server:8080

# ------------------------------------------------------------------------------
# Verification Settings
# ------------------------------------------------------------------------------
# Default strategy: hybrid, mcp_enhanced, graph_exact, vector_semantic, cascading, adaptive
VERIFY_DEFAULT_STRATEGY=mcp_enhanced

# Maximum claims to extract per request
VERIFY_MAX_CLAIMS_PER_REQUEST=20

# Evidence/graph settings
VERIFY_SIMILARITY_THRESHOLD=0.7
VERIFY_GRAPH_MAX_HOPS=2
VERIFY_ENABLE_CACHING=true
VERIFY_PERSIST_MCP_EVIDENCE=true
VERIFY_PERSIST_TO_VECTOR=true

# Adaptive evidence collection
VERIFY_MIN_EVIDENCE_COUNT=3
VERIFY_MIN_WEIGHTED_VALUE=2.0
VERIFY_HIGH_CONFIDENCE_THRESHOLD=2

# Timeouts (milliseconds)
VERIFY_LOCAL_TIMEOUT_MS=50
VERIFY_MCP_TIMEOUT_MS=500
VERIFY_TOTAL_TIMEOUT_MS=2000

# MCP source selection
VERIFY_MAX_MCP_SOURCES_PER_CLAIM=4
VERIFY_MIN_SOURCE_RELEVANCE=0.5
VERIFY_ENABLE_BACKGROUND_COMPLETION=true

# ------------------------------------------------------------------------------
# Logging
# ------------------------------------------------------------------------------
LOG_LEVEL=INFO

# ------------------------------------------------------------------------------
# Environment
# ------------------------------------------------------------------------------
ENVIRONMENT=development
